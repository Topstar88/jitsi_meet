"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.usePatchedProps = void 0;
var tslib_1 = require("tslib");
var react_1 = require("react");
var useAnalyticsEvents_1 = require("./useAnalyticsEvents");
function usePatchedProps(createEventMap, wrappedComponentProps) {
    if (createEventMap === void 0) { createEventMap = {}; }
    var createAnalyticsEvent = useAnalyticsEvents_1.useAnalyticsEvents().createAnalyticsEvent;
    var patchedProps = react_1.useMemo(function () {
        return Object.keys(createEventMap).reduce(function (p, k) {
            var _a;
            var eventCreator = createEventMap[k];
            if (!['object', 'function'].includes(typeof eventCreator)) {
                return p;
            }
            var propValue = wrappedComponentProps[k];
            var wrappedCallback = function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var analyticsEvent = typeof eventCreator === 'function'
                    ? eventCreator(createAnalyticsEvent, wrappedComponentProps)
                    : createAnalyticsEvent(eventCreator);
                if (propValue && typeof propValue === 'function') {
                    propValue.apply(void 0, tslib_1.__spread(args, [analyticsEvent]));
                }
            };
            return wrappedCallback ? tslib_1.__assign(tslib_1.__assign({}, p), (_a = {}, _a[k] = wrappedCallback, _a)) : p;
        }, {});
    }, [createEventMap, wrappedComponentProps, createAnalyticsEvent]);
    return {
        patchedEventProps: patchedProps,
    };
}
exports.usePatchedProps = usePatchedProps;
//# sourceMappingURL=usePatchedProps.js.map